\documentclass[a4paper,12pt]{article}
%\usepackage{url}

\title{Dummy file for html research publications}
\author{Tony Roberts}

% to get altimetrics??
%<div data-badge-popover="right" data-badge-type="2" data-doi="10.1038/35085561" class="altmetric-embed"></div>

\makeatletter

\newcommand{\url}[1]{\texttt{#1}} % !! unnecessary??
\catcode`\~=12 % make tilde an ordinary character
\catcode`\_=12 % make underscore an ordinary character
\begingroup % define ampersand character
\catcode`\&=12 \gdef\@ampersandchar{&}
\endgroup

\newcommand{\AjRpagebegin}[1]{
% \renewcommand{~}{ }
\renewenvironment{itemize}{^^J<ul>}{^^J</ul>}
\renewenvironment{enumerate}{^^J<ol>}{^^J</ol>}
\renewcommand{\newpage}{<p>}
\renewcommand{\item}{^^J<li>}
\renewcommand{\url}[1]{<tt><a href="##1">##1</a></tt>}
\renewcommand{\emph}[1]{<em>##1</em>}
\renewcommand{\texttt}[1]{<tt>##1</tt>}
\renewcommand{\textsc}[1]{##1}
\renewcommand{\textsf}[1]{<b>##1</b>}
\renewcommand{\textbf}[1]{<b>##1</b>}
\renewcommand{\%}{\@percentchar}
\renewcommand{\&}{\@ampersandchar}
\renewcommand{\S}{\@ampersandchar\@hashchar167;}
\renewcommand{\ }{ }
\renewcommand{\,}{ }
% \renewcommand{\LaTeX}{L<sup>A</sup>T<sub>E</sub>X}
\renewcommand{\LaTeX}{LaTeX}
\def\par{^^J<p/>}
\renewenvironment{center}{^^J<center>}{^^J</center>}
\renewenvironment{tabular}[1]%
{^^J<table border=1><tr><td>}{</td></tr>^^J</table>}
\renewcommand{\\}{</td></tr>^^J<tr><td>}
\renewcommand{\hline}{}
%\renewcommand{\AjRamp}{</td><td>}
\immediate\write\AjRout{<?php^^J
$title="Research and other publications";^^J
$dates="\today";^^J
include "header.php";^^J
include "menuside.php";^^J
?>^^J
<div class="newspaper">^^J
}
} % end MaCpagebegin


\newcommand{\AjRpageend}{
\immediate\write\AjRout{</div>^^J
<?php 
include "footer.php";
?>}
\immediate\closeout\AjRout
} % end MaCpageend

\newwrite\AjRout

\makeatother


\begin{document}
    
\maketitle

\paragraph{Procedure}  Replace the cite command below with a cite command from BibDesk for all publications sorted by year, say.  \LaTeX\ this file, ignoring all error messages.  Then BibTeX this file to get the \verb|ajr.bbl| file.  \emph{Do not} \LaTeX\ the file \verb|site.tex| to translate the bbl file into the html file of the cite.

There exists an error such as url with extra brace, which I cannot track down.  But it makes no difference to the result as far as I can see.


\paragraph{Writing publications.php file} lets see what happens.

\newcommand{\doi}[1]{<a href="http://dx.doi.org/#1">doi:#1</a>
<div data-badge-popover="right" data-badge-type="2" data-doi="#1" data-hide-no-mentions="true" class="altmetric-embed"></div>}

\begingroup
%\newwrite\AjRout
\immediate\openout\AjRout publications.php\relax
\AjRpagebegin{Most research publications}
\makeatletter
\def\j@@Input{%
  \let\AjRtempb\AjRtempa
  \immediate\read\AjRin to\AjRtempa
  \ifeof\AjRin
    \immediate\closein\AjRin
  \else
    \immediate\write\AjRout{\AjRtempb}
    \expandafter\j@@Input
  \fi}
\typeout{**** Starting to write the bibliography.}
\newread\AjRin
\immediate\openin\AjRin ajr.bbl\relax
\immediate\read\AjRin to\AjRtempa
\immediate\read\AjRin to\AjRtempa
\j@@Input
\immediate\closein\AjRin
\makeatother
\AjRpageend 
\endgroup

% just copied in reverse date order
\cite{Roberts2025a,Roberts2024a,TranDuc2024a,Roberts2023a,TranDuc2023a,Divahar2022a,Roberts2022a,Divahar2022b,Thamwattana2022,Thamwattana2022b,Bunder2022b,Roberts2018a,Bunder2022a,Maclean2021a,Maclean2020a,Bunder2020a,Bunder2019d,Maclean2020b,Roberts2020a,Bunder2018a,Roberts2017a,Roberts2020b,Arbabi2020,Roberts2020c,Edson2019a,Roberts2019a,Cao2014c,Hochs2019,Roberts2019b,Chen2018b,Chen2016,Alotaibi2017a,Chen2018,Jarrad2016a,Bunder2013b,Bunder2013c,Roberts2016a,Sircar2016d,Borazjani2015,Bunder2015a,Cao2014a,Cao2014b,MISG2014,MISG2015,Sircar2016a,Sircar2016b,Sircar2016c,Wake2016,Chen2015,Xiaopeng2012,Roberts2015a,Bunder2013a,Roberts2013a,Roberts2014a,Wang2012,Chen2014,MISG2013,Roberts2011a,YanLv2012,YanLv2013,Cao2013,Kan2010,MISG2012,Roberts2013b,Wang2008b,Wang2011b,Cao2012,Roberts2011b,Bunder2012,Roberts2012a,Roberts2012b,Wang2009a,Wang2009b,Wang2010b,YanLv2011a,Chen2011,Duan2011a,MacKenzie11a,Roberts11c,Wang2010a,Wang2011a,Roberts2010,Roberts08a,Roberts08l,Roberts09b,Roberts10a,Roberts10b,Roberts10c,Roberts11a,Roberts2010b,Samaey08,Georgiev09,Strunin09a,MacKenzie09a,MacKenzie09b,Roberts06a,Roberts06m,Roberts08c,Roberts08g,Roberts09a,Roberts09c,TNFV9MK,Wang2008,Roberts08k,Roberts08h,Roberts06k,Roberts08b,Roberts08d,Roberts08e,Roberts08f,Roberts08i,Roberts08j,Roberts08v1,Roberts08v2,Roberts08z,Roberts2008,Georgiev06,Roberts07i,Roberts07g,Roberts07f,Roberts06g,Roberts07e,Roberts07c,Roberts07a,Georgiev07,Melnik07,Roberts06c,Roberts06d,Roberts06j,Roberts07b,Roberts07j,Tremblay06,Zhenquan00,Zhenquan03,Roberts06l,Roberts06i,Roberts06h,Roberts06f,Roberts99b,Roberts06e,Ioualalen06,MacKenzie05a,Roberts04b,Roberts05c,Roberts06b,Roberts06n,Mercer05,Roberts05e,Roberts04d,Roberts96c,Roberts05a,Melnik04,Roberts05b,Roberts05d,Roberts04e,Ujevic04,Jelinek04,Melnik2004,Roberts03a,Roberts03d,Roberts04a,Roberts04c,Roberts04f,Strunin01a,Roberts03c,Cretchley03,MacKenzie03,Passmore03,Roberts01b,Strunin01b,Melnik03,Roberts00a,Roberts02a,Roberts02b,Roberts03b,Roberts99c,Jelinek01,Melnik01b,Melnik02,Melnik02b,Roberts01c,Roy96,Strunin02,Roberts99d,Jarrad01,McGuinness01,Melnik01,Roberts00d,Roberts01a,Roberts01d,Roberts01f,Roberts01g,Roberts98a,Simpson01a,Strunin00,Strunin01c,Young01,Roberts98b,Melnik00a,MacKenzie00a,MacKenzie00b,McGuinness00,Melnik00b,Melnik00c,Melnik00d,Melnik98,Roberts00b,Roberts00c,Roberts97b,Strunin00b,Suslov00a,Smith98,Ioualalen98,Melnik99,Melnik99b,Roberts99a,Suslov98c,Suslov99,Suslov98a,Roberts96b,Roberts98c,Roberts98d,Simpson97,Smith97,Suslov98b,Zhenquan98,Roberts96a,Roberts97a,Roberts97c,Roberts97d,Tuck97,Zhang97,Smith94,Chao95,Ioualalen94,Roberts94c,Roberts95b,Watt94c,Cox93b,Emmerson95,Mei94,Roberts95a,Watt94b,Watt95,Roberts94a,Cox93a,Mercer94a,Mercer94b,Roberts94b,Roberts94d,Oats93,Roberts93,Cox92,Mercer91,Mercer92,Roberts92,Roberts92b,Roberts92c,Roberts92d,Roberts92e,Roberts92f,Cox91,Marchant90,Mercer90,Pollett90,Roberts90,Roberts89,Roberts89b,Stienle89,Marchant88a,Roberts88a,Roberts88b,Marchant87b,Roberts87a,Roberts85a,Roberts85b,Roberts85c,Roberts83a,Roberts83b,Roberts83c,Roberts83d,Roberts82,Roberts81,Roberts81b,Roberts77}

\bibliographystyle{html}
\bibliography{ajr}

    
\end{document}